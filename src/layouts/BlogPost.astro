---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import Seth from "../assets/seth.jpg";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Header from "../components/Header.svelte";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body class="bg-slate-900 text-slate-200 flex flex-col min-h-screen">
		<Header client:load currentPath={Astro.url.pathname} />
		<main class="flex-1">
			<article class="max-w-4xl mx-auto px-6 pt-36 pb-20">
				<p class="text-teal-300/70 mb-2">
					<FormattedDate date={pubDate} />
				</p>
				{
					updatedDate && (
						<p class="mb-3 text-sm italic text-slate-400">
							Last updated on <FormattedDate date={updatedDate} />
						</p>
					)
				}
				<p
					class="text-teal-500/80 text-3xl font-bold my-8 leading-none"
				>
					&#47;&#47;
				</p>
				<h1 class="text-5xl mb-4">{title}</h1>
				<p
					class="text-slate-300 text-xl max-w-2xl leading-relaxed mb-10"
				>
					{description}
				</p>

				{
					heroImage && (
						<div class="mb-10">
							<Image
								width={1200}
								height={630}
								src={heroImage}
								alt={title}
								class="w-full object-cover"
							/>
						</div>
					)
				}

				<div class="blog-content text-slate-200/90">
					<slot />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>

<style>
	.blog-content :global(h1),
	.blog-content :global(h2) {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		margin-top: 2rem;
		margin-bottom: 0.9rem;
	}

	.blog-content :global(h1)::before,
	.blog-content :global(h2)::before {
		content: "//";
		color: rgb(20 184 166 / 0.8);
	}

	.blog-content :global(h2) {
		font-size: 1.9rem;
	}

	.blog-content :global(h3) {
		margin-top: 1.25rem;
		margin-bottom: 0.65rem;
		font-size: 1.35rem;
	}

	.blog-content :global(p),
	.blog-content :global(ul),
	.blog-content :global(ol) {
		font-size: 1.125rem;
		line-height: 1.75;
	}

	.blog-content :global(p + p),
	.blog-content :global(p + ul),
	.blog-content :global(p + ol),
	.blog-content :global(ul + p),
	.blog-content :global(ol + p) {
		margin-top: 1rem;
	}

	.blog-content :global(ul),
	.blog-content :global(ol) {
		padding-left: 1.5rem;
	}

	.blog-content :global(ul) {
		list-style: disc;
	}

	.blog-content :global(ol) {
		list-style: decimal;
	}

	.blog-content :global(li + li) {
		margin-top: 0.35rem;
	}

	.blog-content :global(li) {
		padding-left: 0.35rem;
	}

	.blog-content :global(li::marker) {
		color: rgb(20 184 166 / 0.8);
	}

	.blog-content :global(a) {
		color: rgb(94 234 212 / 0.9);
		text-decoration: underline;
		text-underline-offset: 3px;
	}

	.blog-content :global(pre) {
		overflow-x: auto;
		padding: 1rem;
		background: rgb(15 23 42 / 0.9);
		border: 1px solid rgb(51 65 85 / 0.8);
	}

	.blog-content :global(code):not(:global(pre code)) {
		padding: 0.1rem 0.35rem;
		background: rgb(30 41 59 / 0.75);
		font-size: 0.95em;
	}
</style>
